<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trilogy_Homes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Custom styles to complement Tailwind and Bootstrap */
        .sidebar {
            transition: transform 0.3s ease-in-out;
        }
        .sidebar-hidden {
            transform: translateX(-100%);
        }
        .dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .dark-mode .bg-white {
            background-color: #2d3748;
        }
        .dark-mode .text-gray-800 {
            color: #e2e8f0;
        }
        .dark-mode .text-gray-600 {
            color: #a0aec0;
        }
        .dark-mode .bg-gray-800 {
            background-color: #4a5568;
        }
        .dark-mode .bg-gray-100 {
            background-color: #2d3748;
        }
        .dark-mode .bg-blue-500 {
            background-color: #63b3ed;
        }
        .dark-mode .hover:bg-blue-600 {
            background-color: #4299e1;
        }
        .dark-mode .border-gray-700 {
            border-color: #4a5568;
        }
        .notification-dropdown {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: #fff;
            border: 1px solid #e2e8f0;
            border-radius: 4px;
            min-width: 300px;
            max-height: 300px;
            overflow-y: auto;
            z-index: 50;
        }
        .dark-mode .notification-dropdown {
            background-color: #2d3748;
            border-color: #4a5568;
        }
        .notification-item {
            padding: 8px 12px;
            border-bottom: 1px solid #e2e8f0;
        }
        .dark-mode .notification-item {
            border-bottom-color: #4a5568;
        }
        .hidden-by-role {
            display: none !important;
        }
        @media (max-width: 768px) {
            .main-content {
                margin-left: 0 !important;
            }
            .calendar-table td {
                height: 80px;
                font-size: 0.75rem;
            }
            .calendar-event {
                font-size: 0.65rem;
                padding: 1px 2px;
            }
        }
        @media (max-width: 480px) {
            .room-status {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            .overview-stats {
                grid-template-columns: 1fr;
            }
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body class="flex h-screen bg-gray-100 overflow-hidden">
    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg w-full max-w-md p-6 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold">Login</h2>
                <button id="close-login-modal" class="text-gray-600 hover:text-gray-800">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-1">Username</label>
                    <input type="text" id="login-username" class="w-full p-2 border rounded">
                </div>
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-1">Password</label>
                    <input type="password" id="login-password" class="w-full p-2 border rounded">
                </div>
                <div class="flex justify-end gap-2">
                    <button id="cancel-login" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">Cancel</button>
                    <button id="submit-login" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar fixed inset-y-0 left-0 bg-gray-800 text-white w-64 md:w-64 md:translate-x-0 sidebar-hidden md:sidebar-hidden transition-transform duration-300 z-20">
        <div class="flex items-center p-4 border-b border-gray-700">
            <i class="fas fa-hotel text-xl"></i>
            <h2 class="ml-2 text-lg font-semibold">Trilogy_Homes</h2>
            <button id="close-sidebar" class="md:hidden ml-auto text-white">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="p-4">
            <p class="text-xs uppercase text-gray-400 mb-2">Main Menu</p>
            <ul>
                <li class="mb-1">
                    <a href="index2.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent" data-target="today-overview">
                        <i class="fas fa-chart-line mr-2"></i>
                        <span>Today Overview</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="roomstatus.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent" data-target="room-status">
                        <i class="fas fa-door-closed mr-2"></i>
                        <span>Room Status</span>
                        <i class="fas fa-angle-down ml-auto"></i>
                    </a>
                    <div class="pl-4 hidden">
                        <a href="roomstatus.html" class="block p-2 text-sm hover:bg-gray-600 rounded" data-target="room-status">All Rooms</a>
                        <a href="roomstatus.html" class="block p-2 text-sm hover:bg-gray-600 rounded">Available Rooms</a>
                        <a href="roomstatus.html" class="block p-2 text-sm hover:bg-gray-600 rounded">Occupied Rooms</a>
                        <a href="roomstatus.html" class="block p-2 text-sm hover:bg-gray-600 rounded">Maintenance</a>
                    </div>
                </li>
                <li class="mb-1">
                    <a href="calendar.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent" data-target="calendar">
                        <i class="fas fa-calendar-alt mr-2"></i>
                        <span>Booking Calendar</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="guestmanagement.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent hidden-by-role" data-target="guest-management" data-role="admin">
                        <i class="fas fa-users mr-2"></i>
                        <span>Guest Management</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="booking.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent hidden-by-role" data-target="add-booking" data-role="admin staff">
                        <i class="fas fa-plus-circle mr-2"></i>
                        <span>Add New Booking</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="viewnewbooking.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent hidden-by-role" data-target="add-booking" data-role="admin staff">
                        <i class="fas fa-plus-circle mr-2"></i>
                        <span>View New Booking</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="car-rental.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent hidden-by-role" data-target="add-booking" data-role="admin staff">
                        <i class="fas fa-car mr-2"></i>
                        <span>Car New Booking</span>
                    </a>
                </li>
            </ul>
            <p class="text-xs uppercase text-gray-400 mt-4 mb-2">Settings</p>
            <ul>
                <li class="mb-1">
                    <a href="#" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent hidden-by-role" data-target="settings" data-role="admin">
                        <i class="fas fa-cog mr-2"></i>
                        <span>Settings</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="adduser.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent hidden-by-role" data-target="profile" data-role="admin">
                        <i class="fas fa-user mr-2"></i>
                        <span>Profile</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="account-page.html" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent" data-target="logout">
                        <i class="fas fa-sign-out-alt mr-2"></i>
                        <span>Account</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="#" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent" id="logout" data-target="logout">
                        <i class="fas fa-sign-out-alt mr-2"></i>
                        <span>Logout</span>
                    </a>
                </li>
                <li class="mb-1">
                    <a href="#" class="menu-item flex items-center p-2 rounded hover:bg-gray-700 border-l-4 border-transparent hidden-by-role" data-target="webmail" data-role="admin staff">
                        <i class="fas fa-envelope mr-2"></i>
                        <span>Webmail</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 p-4 md:ml-64 overflow-y-auto main-content">
        <!-- Notification Bar -->
        <div id="notification-bar" class="fixed top-0 left-0 w-full bg-green-500 text-white p-2 text-center hidden z-50"></div>

        <div class="flex justify-between items-center mb-4">
            <button id="open-sidebar" class="md:hidden text-gray-800">
                <i class="fas fa-bars text-xl"></i>
            </button>
            <h1 id="page-title" class="text-2xl font-bold text-gray-800">Today Overview</h1>
            
            <div class="relative">
                <div class="relative">
                    <button id="notification-icon" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 relative">
                        <i class="fas fa-bell"></i>
                        <span id="notification-badge" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center hidden">0</span>
                    </button>
                    <div id="notification-dropdown" class="notification-dropdown">
                        <!-- Messages will be appended here -->
                    </div>
                </div>
                <button id="export-report" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mr-2">
                    <i class="fas fa-download mr-2"></i>Export Report
                </button>
                
                <button id="toggle-dark-mode" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 mr-2">
                    <i class="fas fa-moon"></i> Dark Mode
                </button>
                
            </div>
        </div>

        <!-- Today Overview -->
        <div id="today-overview" class="page-content">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 mb-4 overview-stats">
                <div class="bg-white p-4 rounded-lg shadow hover:bg-gray-50">
                    <a href="viewnewbooking.html">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-blue-100 text-blue-500 flex items-center justify-center mr-4">
                                <i class="fas fa-sign-in-alt text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold">8</h3>
                                <p class="text-gray-600">Check-ins Today</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="bg-white p-4 rounded-lg shadow hover:bg-gray-50">
                    <a href="viewnewbooking.html">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-red-100 text-red-500 flex items-center justify-center mr-4">
                                <i class="fas fa-sign-out-alt text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold">5</h3>
                                <p class="text-gray-600">Check-outs Today</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="bg-white p-4 rounded-lg shadow hover:bg-gray-50">
                    <a href="roomstatus.html">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-green-100 text-green-500 flex items-center justify-center mr-4">
                                <i class="fas fa-door-open text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold">12</h3>
                                <p class="text-gray-600">Available Rooms</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="bg-white p-4 rounded-lg shadow hover:bg-gray-50">
                    <a href="account-page.html">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-yellow-100 text-yellow-500 flex items-center justify-center mr-4">
                                <i class="fas fa-dollar-sign text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold">$3,850</h3>
                                <p class="text-gray-600">Today's Revenue</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="bg-white p-4 rounded-lg shadow hover:bg-gray-50">
                    <a href="viewnewbooking.html">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-purple-100 text-purple-500 flex items-center justify-center mr-4">
                                <i class="fas fa-clock text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold">3</h3>
                                <p class="text-gray-600">Pending Bookings</p>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="bg-white p-4 rounded-lg shadow hover:bg-gray-50">
                    <a href="viewnewbooking.html">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-full bg-orange-100 text-orange-500 flex items-center justify-center mr-4">
                                <i class="fas fa-tools text-xl"></i>
                            </div>
                            <div>
                                <h3 class="text-xl font-semibold">2</h3>
                                <p class="text-gray-600">Maintenance Alerts</p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 dashboard-grid">
                <div class="bg-white p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold mb-2">Today's Check-ins</h2>
                    <table class="w-full guest-table">
                        <thead>
                            <tr class="bg-gray-800 text-white">
                                <th class="p-2 text-left">Guest Name</th>
                                <th class="p-2 text-left">Room</th>
                                <th class="p-2 text-left">Time</th>
                                <th class="p-2 text-left">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="p-2">John Smith</td>
                                <td class="p-2">101</td>
                                <td class="p-2">10:00 AM</td>
                                <td class="p-2"><span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Confirmed</span></td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-2">Mary Johnson</td>
                                <td class="p-2">205</td>
                                <td class="p-2">12:30 PM</td>
                                <td class="p-2"><span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Checked In</span></td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-2">Robert Brown</td>
                                <td class="p-2">310</td>
                                <td class="p-2">2:00 PM</td>
                                <td class="p-2"><span class="px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-500">Pending</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="bg-white p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold mb-2">Today's Check-outs</h2>
                    <table class="w-full guest-table">
                        <thead>
                            <tr class="bg-gray-800 text-white">
                                <th class="p-2 text-left">Guest Name</th>
                                <th class="p-2 text-left">Room</th>
                                <th class="p-2 text-left">Time</th>
                                <th class="p-2 text-left">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b">
                                <td class="p-2">James Wilson</td>
                                <td class="p-2">402</td>
                                <td class="p-2">11:00 AM</td>
                                <td class="p-2"><span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Checked Out</span></td>
                            </tr>
                            <tr class="border-b">
                                <td class="p-2">Susan Miller</td>
                                <td class="p-2">207</td>
                                <td class="p-2">12:00 PM</td>
                                <td class="p-2"><span class="px-2 py-1 rounded-full text-xs bg-red-100 text-red-500">Pending</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Charts -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 mt-4">
                <div class="bg-white p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold mb-2">Booking Progress (Histogram)</h2>
                    <canvas id="bookingHistogram"></canvas>
                </div>
                <div class="bg-white p-4 rounded-lg shadow">
                    <h2 class="text-lg font-semibold mb-2">Booking Distribution (Pie Chart)</h2>
                    <canvas id="bookingPieChart"></canvas>
                </div>
                <div class="bg-white p-4 rounded-lg shadow col-span-2">
                    <h2 class="text-lg font-semibold mb-2">Profit vs Expenses (Bar Chart)</h2>
                    <canvas id="profitExpensesChart"></canvas>
                </div>
            </div>
            <!-- Financial Overview Cards -->
            <div class="bg-white p-4 rounded-lg shadow mt-4">
                <h2 class="text-lg font-semibold mb-2">Financial Overview</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow card">
                        <div class="card-body text-center">
                            <h3 class="text-lg font-semibold">Profit ($)</h3>
                            <p id="profitValue" class="text-2xl font-bold text-green-500">3000</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow card">
                        <div class="card-body text-center">
                            <h3 class="text-lg font-semibold">Expenses ($)</h3>
                            <p id="expensesValue" class="text-2xl font-bold text-red-500">2000</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow card">
                        <div class="card-body text-center">
                            <h3 class="text-lg font-semibold">Revenue ($)</h3>
                            <p id="revenueValue" class="text-2xl font-bold text-blue-500">5000</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow card">
                        <div class="card-body text-center">
                            <h3 class="text-lg font-semibold">Investment Capital ($)</h3>
                            <p id="investmentValue" class="text-2xl font-bold text-yellow-500">2500</p>
                        </div>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow card">
                        <div class="card-body text-center">
                            <h3 class="text-lg font-semibold">Future Forecast (%)</h3>
                            <p id="forecastValue" class="text-2xl font-bold text-purple-500">10</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Chat Box -->
            <div class="bg-white p-4 rounded-lg shadow mt-4">
                <h2 class="text-lg font-semibold mb-2">Chat</h2>
                <div class="mb-4">
                    <input type="text" id="chat-sender" class="w-full p-2 border rounded mb-2" placeholder="Your Name">
                    <textarea id="chat-message" class="w-full p-2 border rounded mb-2" placeholder="Type your message..." rows="3"></textarea>
                    <button id="send-message" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Send</button>
                </div>
            </div>
        </div>

        <!-- Room Status -->
        <div id="room-status" class="page-content hidden">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold text-gray-800">Room Status</h1>
                <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                    <i class="fas fa-filter mr-2"></i>Filter
                </button>
            </div>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 room-status">
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                    <div class="text-lg font-bold">101</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Available</span>
                    <div class="mt-2 text-sm text-gray-600">King Bed</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-red-500">
                    <div class="text-lg font-bold">102</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-red-100 text-red-500">Occupied</span>
                    <div class="mt-2 text-sm text-gray-600">Smith Family</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                    <div class="text-lg font-bold">103</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Available</span>
                    <div class="mt-2 text-sm text-gray-600">Double Bed</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-yellow-500">
                    <div class="text-lg font-bold">104</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-500">Maintenance</span>
                    <div class="mt-2 text-sm text-gray-600">Plumbing Issue</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-red-500">
                    <div class="text-lg font-bold">201</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-red-100 text-red-500">Occupied</span>
                    <div class="mt-2 text-sm text-gray-600">Johnson Party</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                    <div class="text-lg font-bold">202</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Available</span>
                    <div class="mt-2 text-sm text-gray-600">Suite</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-red-500">
                    <div class="text-lg font-bold">203</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-red-100 text-red-500">Occupied</span>
                    <div class="mt-2 text-sm text-gray-600">Wilson Family</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                    <div class="text-lg font-bold">204</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Available</span>
                    <div class="mt-2 text-sm text-gray-600">Twin Bed</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-yellow-500">
                    <div class="text-lg font-bold">205</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-500">Maintenance</span>
                    <div class="mt-2 text-sm text-gray-600">AC Repair</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                    <div class="text-lg font-bold">301</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Available</span>
                    <div class="mt-2 text-sm text-gray-600">King Bed</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-red-500">
                    <div class="text-lg font-bold">302</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-red-100 text-red-500">Occupied</span>
                    <div class="mt-2 text-sm text-gray-600">Brown Party</div>
                </div>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-green-500">
                    <div class="text-lg font-bold">303</div>
                    <span class="px-2 py-1 rounded-full text-xs bg-green-100 text-green-500">Available</span>
                    <div class="mt-2 text-sm text-gray-600">Queen Bed</div>
                </div>
            </div>
        </div>

        <!-- Calendar -->
        <div id="calendar" class="page-content hidden">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-2xl font-bold text-gray-800">Booking Calendar</h1>
                <div class="flex gap-2">
                    <button class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300"><i class="fas fa-chevron-left"></i></button>
                    <button class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300">Today</button>
                    <button class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
            <table class="w-full border-collapse calendar-table">
                <thead>
                    <tr class="bg-gray-800 text-white">
                        <th class="p-2">Sunday</th>
                        <th class="p-2">Monday</th>
                        <th class="p-2">Tuesday</th>
                        <th class="p-2">Wednesday</th>
                        <th class="p-2">Thursday</th>
                        <th class="p-2">Friday</th>
                        <th class="p-2">Saturday</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">28</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 101: Smith</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">29</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 202: Johnson</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">30</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">1</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 303: Davis</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">2</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">3</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 205: Miller</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">4</div>
                        </td>
                    </tr>
                    <tr>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">5</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">6</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 101: Wilson</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">7</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">8</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 302: Brown</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">9</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">10</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">11</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 204: Taylor</div>
                        </td>
                    </tr>
                    <tr>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">12</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">13</div>
                            <div class="text-blue-500 font-bold">Today</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 101: Smith</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 205: Johnson</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">14</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">15</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 303: White</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">16</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">17</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 101: Jones</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">18</div>
                        </td>
                    </tr>
                    <tr>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">19</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 202: Wilson</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">20</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">21</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">22</div>
                            <div class="calendar-event bg-blue-500 text-white text-xs p-1 rounded mt-1">Room 303: Clark</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">23</div>
                        </td>
                        <td class="p-2 border h-24 align-top">
                            <div class="font-bold">24</div>
                        </td>
                        <td class="p-2 border h-24 align-top"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Guest Management -->
        <div id="guest-management" class="page-content hidden">
            <h1 class="text-2xl font-bold text-gray-800 mb-4">Guest Management</h1>
            <table class="w-full border-collapse guest-table">
                <thead>
                    <tr class="bg-gray-800 text-white">
                        <th class="p-2 text-left">Guest Name</th>
                        <th class="p-2 text-left">Room</th>
                        <th class="p-2 text-left">Check-in</th>
                        <th class="p-2 text-left">Check-out</th>
                        <th class="p-2 text-left">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="border-b hover:bg-gray-50">
                        <td class="p-2">John Smith</td>
                        <td class="p-2">101</td>
                        <td class="p-2">2025-05-12</td>
                        <td class="p-2">2025-05-15</td>
                        <td class="p-2">
                            <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2 hover:bg-blue-600">Edit</button>
                            <button class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600">Delete</button>
                        </td>
                    </tr>
                    <tr class="border-b hover:bg-gray-50">
                        <td class="p-2">Mary Johnson</td>
                        <td class="p-2">205</td>
                        <td class="p-2">2025-05-13</td>
                        <td class="p-2">2025-05-17</td>
                        <td class="p-2">
                            <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2 hover:bg-blue-600">Edit</button>
                            <button class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600">Delete</button>
                        </td>
                    </tr>
                    <tr class="border-b hover:bg-gray-50">
                        <td class="p-2">Robert Brown</td>
                        <td class="p-2">310</td>
                        <td class="p-2">2025-05-13</td>
                        <td class="p-2">2025-05-16</td>
                        <td class="p-2">
                            <button class="bg-blue-500 text-white px-2 py-1 rounded mr-2 hover:bg-blue-600">Edit</button>
                            <button class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600">Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Add New Booking -->
        <div id="add-booking" class="page-content hidden">
            <h1 class="text-2xl font-bold text-gray-800 mb-4">Add New Booking</h1>
            <button id="open-modal" class="bg-blue-500 text-white px-4 py-2 rounded mb-4 hover:bg-blue-600">
                <i class="fas fa-plus mr-2"></i>Open Booking Form
            </button>
        </div>

        <!-- Webmail -->
        <div id="webmail" class="page-content hidden">
            <h1 class="text-2xl font-bold text-gray-800 mb-4">Webmail</h1>
            <a href="https://mail.google.com" target="_blank" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Open Webmail</a>
        </div>

        <!-- Modal -->
        <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
            <div class="bg-white rounded-lg w-full max-w-md p-6 max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold">New Booking</h2>
                    <button id="close-modal" class="text-gray-600 hover:text-gray-800">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div>
                    <div class="mb-4">
                        <label class="block text-gray-700 font-medium mb-1">Guest Name</label>
                        <input type="text" class="w-full p-2 border rounded" placeholder="Enter guest name">
                    </div>
                    <div class="mb-4">
                        <select>
                          <option value="">Select Apartment Number</option>
                          <option value="101">101 - Standard (Available)</option>
                          <option value="103">103 - Standard (Available)</option>
                          <option value="202">202 - Deluxe (Available)</option>
                          <option value="204">204 - Deluxe (Available)</option>
                          <option value="301">301 - Suite (Available)</option>
                          <option value="303">303 - Family (Available)</option>
                      </select>
                    </div>
                    <div class="mb-4">
                      <label class="block text-gray-700 font-medium mb-1">Agent Name</label>
                      <input type="text" class="w-full p-2 border rounded" placeholder="Enter guest name">
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                        <label for="adults">Number of Adults *</label>
                        <select id="adults" name="adults" class="form-control" required>
                            <option value="1">1</option>
                            <option value="2" selected>2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                    <div class="flex gap-4 mb-4">
                        <div class="flex-1">
                            <label class="block text-gray-700 font-medium mb-1">Check-in Date</label>
                            <input type="date" class="w-full p-2 border rounded">
                        </div>
                        <div class="flex-1">
                            <label class="block text-gray-700 font-medium mb-1">Check-out Date</label>
                            <input type="date" class="w-full p-2 border rounded">
                        </div>
                    </div>
                    <div class="flex justify-end gap-2">
                        <button id="cancel-modal" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">Cancel</button>
                        <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Sidebar toggle
        const sidebar = document.getElementById('sidebar');
        const openSidebarBtn = document.getElementById('open-sidebar');
        const closeSidebarBtn = document.getElementById('close-sidebar');

        openSidebarBtn?.addEventListener('click', () => {
            sidebar.classList.remove('sidebar-hidden');
        });

        closeSidebarBtn?.addEventListener('click', () => {
            sidebar.classList.add('sidebar-hidden');
        });

        // Login System
        const loginModal = document.getElementById('login-modal');
        const closeLoginModal = document.getElementById('close-login-modal');
        const cancelLogin = document.getElementById('cancel-login');
        const submitLogin = document.getElementById('submit-login');
        const loginUsername = document.getElementById('login-username');
        const loginPassword = document.getElementById('login-password');
        const logoutBtn = document.getElementById('logout');

        // Simulated user database (replace with backend in production)
        const users = {
            'admin1': { password: 'adminpass', role: 'admin' },
            'staff1': { password: 'staffpass', role: 'staff' },
            'user1': { password: 'userpass', role: 'user' }
        };

        function showLoginModal() {
            loginModal.classList.remove('hidden');
        }

        function hideLoginModal() {
            loginModal.classList.add('hidden');
        }

        function updateUIForRole(role) {
            const menuItems = document.querySelectorAll('.menu-item[data-role]');
            menuItems.forEach(item => {
                const allowedRoles = item.getAttribute('data-role').split(' ');
                if (!allowedRoles.includes(role) && role !== 'admin') {
                    item.classList.add('hidden-by-role');
                } else {
                    item.classList.remove('hidden-by-role');
                }
            });
            pageContents.forEach(content => {
                const target = content.getAttribute('id');
                const item = document.querySelector(`.menu-item[data-target="${target}"]`);
                if (item && item.getAttribute('data-role')) {
                    const allowedRoles = item.getAttribute('data-role').split(' ');
                    if (!allowedRoles.includes(role) && role !== 'admin') {
                        content.classList.add('hidden-by-role');
                    }
                }
            });
        }

        submitLogin.addEventListener('click', () => {
            const username = loginUsername.value;
            const password = loginPassword.value;
            if (users[username] && users[username].password === password) {
                localStorage.setItem('currentUser', JSON.stringify({ username, role: users[username].role }));
                hideLoginModal();
                updateUIForRole(users[username].role);
            } else {
                alert('Invalid credentials');
            }
        });

        closeLoginModal.addEventListener('click', hideLoginModal);
        cancelLogin.addEventListener('click', hideLoginModal);
        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('currentUser');
            showLoginModal();
            updateUIForRole(null);
        });

        // Check if user is logged in on load
        document.addEventListener('DOMContentLoaded', () => {
            const currentUser = JSON.parse(localStorage.getItem('currentUser'));
            if (!currentUser) {
                showLoginModal();
            } else {
                updateUIForRole(currentUser.role);
            }
        });

        // Content switching
        const menuItems = document.querySelectorAll('.menu-item');
        const pageContents = document.querySelectorAll('.page-content');
        const pageTitle = document.getElementById('page-title');

        menuItems.forEach(item => {
            item.addEventListener('click', (e) => {
                const target = item.getAttribute('data-target');
                const href = item.getAttribute('href');
                if (href && href !== '#') {
                    return;
                }

                e.preventDefault();

                pageContents.forEach(content => content.classList.add('hidden'));
                const targetContent = document.getElementById(target);
                if (targetContent) {
                    targetContent.classList.remove('hidden');
                    pageTitle.textContent = item.querySelector('span')?.textContent || '';
                }

                menuItems.forEach(i => i.classList.remove('active', 'border-blue-500'));
                item.classList.add('active', 'border-blue-500');

                if (window.innerWidth < 768) {
                    sidebar.classList.add('sidebar-hidden');
                }
            });
        });

        // Dropdown toggle
        const dropdownBtn = document.querySelector('.menu-item[data-target="room-status"]');
        const dropdownContainer = dropdownBtn?.nextElementSibling;
        dropdownBtn?.addEventListener('click', (e) => {
            e.preventDefault();
            const isHidden = dropdownContainer.classList.contains('hidden');
            dropdownContainer.classList.toggle('hidden', !isHidden);
        });

        // Modal
        const modal = document.getElementById('modal');
        document.getElementById('open-modal')?.addEventListener('click', () => modal?.classList.remove('hidden'));
        document.getElementById('close-modal')?.addEventListener('click', () => modal?.classList.add('hidden'));
        document.getElementById('cancel-modal')?.addEventListener('click', () => modal?.classList.add('hidden'));
        modal?.addEventListener('click', (e) => {
            if (e.target === modal) modal.classList.add('hidden');
        });

        // Dark Mode
        const toggleDarkModeBtn = document.getElementById('toggle-dark-mode');
        toggleDarkModeBtn.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            toggleDarkModeBtn.textContent = document.body.classList.contains('dark-mode') ? 'Light Mode' : 'Dark Mode';
        });

        // Charts
        const bookingHistogram = document.getElementById('bookingHistogram').getContext('2d');
        const bookingPieChart = document.getElementById('bookingPieChart').getContext('2d');
        const profitExpensesChart = document.getElementById('profitExpensesChart').getContext('2d');

        // Simulated booking data for 2025
        const bookings = [
            { month: 'January', apartment: 10, car: 5 },
            { month: 'February', apartment: 12, car: 6 },
            { month: 'March', apartment: 15, car: 8 },
            { month: 'April', apartment: 18, car: 10 },
            { month: 'May', apartment: 20, car: 12 },
            { month: 'June', apartment: 8, car: 4 } // Up to June 17, 2025
        ];

        new Chart(bookingHistogram, {
            type: 'bar',
            data: {
                labels: bookings.map(b => b.month),
                datasets: [
                    {
                        label: 'Apartment Bookings',
                        data: bookings.map(b => b.apartment),
                        backgroundColor: 'rgba(54, 162, 235, 0.6)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Car Bookings',
                        data: bookings.map(b => b.car),
                        backgroundColor: 'rgba(255, 99, 132, 0.6)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                scales: { y: { beginAtZero: true } },
                plugins: { legend: { position: 'top' } }
            }
        });

        const totalApartment = bookings.reduce((sum, b) => sum + b.apartment, 0);
        const totalCar = bookings.reduce((sum, b) => sum + b.car, 0);
        const totalBookings = totalApartment + totalCar;

        new Chart(bookingPieChart, {
            type: 'pie',
            data: {
                labels: ['Apartment', 'Car'],
                datasets: [{
                    data: [totalApartment, totalCar],
                    backgroundColor: ['rgba(54, 162, 235, 0.6)', 'rgba(255, 99, 132, 0.6)']
                }]
            },
            options: {
                plugins: { legend: { position: 'top' } }
            }
        });

        // Profit vs Expenses Data
        const profitExpensesData = [
            { month: 'January', profit: 5000, expenses: 3000 },
            { month: 'February', profit: 5500, expenses: 3200 },
            { month: 'March', profit: 6000, expenses: 3500 },
            { month: 'April', profit: 6500, expenses: 3800 },
            { month: 'May', profit: 7000, expenses: 4000 },
            { month: 'June', profit: 3000, expenses: 2000 } // Up to June 17, 2025
        ];

        const profitChart = new Chart(profitExpensesChart, {
            type: 'bar',
            data: {
                labels: profitExpensesData.map(d => d.month),
                datasets: [
                    {
                        label: 'Profit ($)',
                        data: profitExpensesData.map(d => d.profit),
                        backgroundColor: 'rgba(40, 167, 69, 0.6)', // Green
                        borderColor: 'rgba(40, 167, 69, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Expenses ($)',
                        data: profitExpensesData.map(d => d.expenses),
                        backgroundColor: 'rgba(220, 53, 69, 0.6)', // Red
                        borderColor: 'rgba(220, 53, 69, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                scales: { y: { beginAtZero: true } },
                plugins: { legend: { position: 'top' } }
            }
        });

        // Dynamically update financial overview cards
        function updateFinancialOverview() {
            const juneData = profitExpensesData.find(d => d.month === 'June');
            if (juneData) {
                document.getElementById('profitValue').textContent = juneData.profit;
                document.getElementById('expensesValue').textContent = juneData.expenses;
                document.getElementById('revenueValue').textContent = juneData.profit + 2000; // Simulated revenue as profit + additional income
                document.getElementById('investmentValue').textContent = (juneData.profit * 0.5).toFixed(0); // 50% of profit as investment
                document.getElementById('forecastValue').textContent = '10'; // Fixed 10% forecast for June
            }
        }

        // Initial update
        document.addEventListener('DOMContentLoaded', updateFinancialOverview);

        // Chat and Notification
        const notificationBar = document.getElementById('notification-bar');
        const chatSender = document.getElementById('chat-sender');
        const chatMessage = document.getElementById('chat-message');
        const sendMessageBtn = document.getElementById('send-message');
        const notificationIcon = document.getElementById('notification-icon');
        const notificationBadge = document.getElementById('notification-badge');
        const notificationDropdown = document.getElementById('notification-dropdown');

        let messages = JSON.parse(localStorage.getItem('chatMessages')) || [];
        let unreadCount = 0;

        function updateNotifications() {
            notificationDropdown.innerHTML = '';
            messages.forEach(msg => {
                const div = document.createElement('div');
                div.className = 'notification-item';
                div.textContent = `${msg.sender} (${msg.timestamp}): ${msg.message}`;
                notificationDropdown.appendChild(div);
            });
            unreadCount = messages.length; // Simple unread count; refine with read status if needed
            notificationBadge.textContent = unreadCount;
            notificationBadge.classList.toggle('hidden', unreadCount === 0);
        }

        sendMessageBtn.addEventListener('click', () => {
            const sender = chatSender.value.trim();
            const message = chatMessage.value.trim();
            if (sender && message) {
                const now = new Date();
                const timestamp = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true }); // e.g., "06:31 AM" WAT
                const newMessage = { sender, message, timestamp };
                messages.push(newMessage);
                localStorage.setItem('chatMessages', JSON.stringify(messages));
                updateNotifications();
                notificationBar.textContent = `${sender} (${timestamp}): ${message}`;
                notificationBar.classList.remove('hidden');
                setTimeout(() => notificationBar.classList.add('hidden'), 5000);
                chatSender.value = '';
                chatMessage.value = '';
            }
        });

        notificationIcon.addEventListener('click', () => {
            notificationDropdown.style.display = notificationDropdown.style.display === 'block' ? 'none' : 'block';
            if (unreadCount > 0) {
                unreadCount = 0; // Mark as read on click
                notificationBadge.classList.add('hidden');
            }
        });

        document.addEventListener('click', (e) => {
            if (!notificationIcon.contains(e.target) && !notificationDropdown.contains(e.target)) {
                notificationDropdown.style.display = 'none';
            }
        });

        // Load existing messages
        document.addEventListener('DOMContentLoaded', updateNotifications);
    </script>
</body>
</html>